{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\mbds\\\\Desktop\\\\Restaurants-Oualid\\\\client\\\\src\\\\components\\\\restaurants.js\";\nimport React from \"react\";\nimport SimpleTable from \"./table/simple_table\";\n\nclass Restaurant extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.callbackPageSize = pageSizeChild => {\n      this.state.pageSize = pageSizeChild; // this.setState({ pageSize: pageSizeChild });\n\n      console.log(\"Venant du menu \" + this.state.pageSize);\n      this.getRestaurants();\n    };\n\n    this.callbackIndexPage = indexPagechild => {\n      this.state.indexPage = indexPagechild; // this.setState({ indexPage: indexPagechild });\n\n      console.log(this.state.indexPage);\n      this.getRestaurants();\n    };\n\n    this.state = {\n      restaurants: [],\n      nbRestaurants: 0,\n      pageSize: 10,\n      indexPage: 0\n    }; // this.getRestaurants();\n  }\n\n  componentDidMount() {\n    this.getRestaurants();\n  }\n\n  getRestaurants() {\n    console.log(\"je vais chercher les restaurants\");\n    var url = \"http://localhost:8080/api/restaurants?page=\" + this.state.indexPage + \"&pagesize=\" + this.state.pageSize + \"&name=\" + this.state.search;\n    fetch(url).then(res => res.json()).then(result => {\n      this.setState({\n        // isLoaded: true,\n        nbRestaurants: result.count,\n        restaurants: result.data\n      });\n    }, // Remarque : il est important de traiter les erreurs ici\n    // au lieu d'utiliser un bloc catch(), pour ne pas passer à la trappe\n    // des exceptions provenant de réels bugs du composant.\n    error => {\n      this.setState({\n        error\n      });\n    });\n  }\n\n  render() {\n    return React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 70\n      },\n      __self: this\n    }, React.createElement(SimpleTable, {\n      titre: \"Nbr Restaurants : \" + this.state.nbRestaurants,\n      data: this.state.restaurants,\n      rowsPerPage: this.state.pageSize,\n      parrentCallbackIndexPage: ip => this.callbackIndexPage(ip),\n      parrentCallbackPageSize: ps => this.callbackPageSize(ps),\n      nbRestaurant: this.state.nbRestaurants,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 71\n      },\n      __self: this\n    }));\n  }\n\n}\n\nexport default Restaurant;","map":{"version":3,"sources":["C:\\Users\\mbds\\Desktop\\Restaurants-Oualid\\client\\src\\components\\restaurants.js"],"names":["React","SimpleTable","Restaurant","Component","constructor","props","callbackPageSize","pageSizeChild","state","pageSize","console","log","getRestaurants","callbackIndexPage","indexPagechild","indexPage","restaurants","nbRestaurants","componentDidMount","url","search","fetch","then","res","json","result","setState","count","data","error","render","ip","ps"],"mappings":";AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,OAAOC,WAAP,MAAwB,sBAAxB;;AAEA,MAAMC,UAAN,SAAyBF,KAAK,CAACG,SAA/B,CAAyC;AACvCC,EAAAA,WAAW,CAACC,KAAD,EAAQ;AACjB,UAAMA,KAAN;;AADiB,SAenBC,gBAfmB,GAeAC,aAAa,IAAI;AAClC,WAAKC,KAAL,CAAWC,QAAX,GAAsBF,aAAtB,CADkC,CAElC;;AACAG,MAAAA,OAAO,CAACC,GAAR,CAAY,oBAAoB,KAAKH,KAAL,CAAWC,QAA3C;AACA,WAAKG,cAAL;AACD,KApBkB;;AAAA,SAsBnBC,iBAtBmB,GAsBCC,cAAc,IAAI;AACpC,WAAKN,KAAL,CAAWO,SAAX,GAAuBD,cAAvB,CADoC,CAEpC;;AACAJ,MAAAA,OAAO,CAACC,GAAR,CAAY,KAAKH,KAAL,CAAWO,SAAvB;AACA,WAAKH,cAAL;AACD,KA3BkB;;AAEjB,SAAKJ,KAAL,GAAa;AACXQ,MAAAA,WAAW,EAAE,EADF;AAEXC,MAAAA,aAAa,EAAE,CAFJ;AAGXR,MAAAA,QAAQ,EAAE,EAHC;AAIXM,MAAAA,SAAS,EAAE;AAJA,KAAb,CAFiB,CAQjB;AACD;;AAEDG,EAAAA,iBAAiB,GAAG;AAClB,SAAKN,cAAL;AACD;;AAiBDA,EAAAA,cAAc,GAAG;AACfF,IAAAA,OAAO,CAACC,GAAR,CAAY,kCAAZ;AAEA,QAAIQ,GAAG,GACL,gDACA,KAAKX,KAAL,CAAWO,SADX,GAEA,YAFA,GAGA,KAAKP,KAAL,CAAWC,QAHX,GAIA,QAJA,GAKA,KAAKD,KAAL,CAAWY,MANb;AAQAC,IAAAA,KAAK,CAACF,GAAD,CAAL,CACGG,IADH,CACQC,GAAG,IAAIA,GAAG,CAACC,IAAJ,EADf,EAEGF,IAFH,CAGIG,MAAM,IAAI;AACR,WAAKC,QAAL,CAAc;AACZ;AACAT,QAAAA,aAAa,EAAEQ,MAAM,CAACE,KAFV;AAGZX,QAAAA,WAAW,EAAES,MAAM,CAACG;AAHR,OAAd;AAKD,KATL,EAUI;AACA;AACA;AACAC,IAAAA,KAAK,IAAI;AACP,WAAKH,QAAL,CAAc;AACZG,QAAAA;AADY,OAAd;AAGD,KAjBL;AAmBD;;AAGDC,EAAAA,MAAM,GAAG;AACP,WACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACE,oBAAC,WAAD;AACE,MAAA,KAAK,EAAE,uBAAuB,KAAKtB,KAAL,CAAWS,aAD3C;AAEE,MAAA,IAAI,EAAE,KAAKT,KAAL,CAAWQ,WAFnB;AAGE,MAAA,WAAW,EAAE,KAAKR,KAAL,CAAWC,QAH1B;AAIE,MAAA,wBAAwB,EAAEsB,EAAE,IAAI,KAAKlB,iBAAL,CAAuBkB,EAAvB,CAJlC;AAKE,MAAA,uBAAuB,EAAEC,EAAE,IAAI,KAAK1B,gBAAL,CAAsB0B,EAAtB,CALjC;AAME,MAAA,YAAY,EAAE,KAAKxB,KAAL,CAAWS,aAN3B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADF,CADF;AAYD;;AA7EsC;;AA+EzC,eAAef,UAAf","sourcesContent":["import React from \"react\";\nimport SimpleTable from \"./table/simple_table\";\n\nclass Restaurant extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      restaurants: [],\n      nbRestaurants: 0,\n      pageSize: 10,\n      indexPage: 0\n    };\n    // this.getRestaurants();\n  }\n\n  componentDidMount() {\n    this.getRestaurants();\n  }\n\n  callbackPageSize = pageSizeChild => {\n    this.state.pageSize = pageSizeChild;\n    // this.setState({ pageSize: pageSizeChild });\n    console.log(\"Venant du menu \" + this.state.pageSize);\n    this.getRestaurants();\n  };\n\n  callbackIndexPage = indexPagechild => {\n    this.state.indexPage = indexPagechild;\n    // this.setState({ indexPage: indexPagechild });\n    console.log(this.state.indexPage);\n    this.getRestaurants();\n  };\n\n\n  getRestaurants() {\n    console.log(\"je vais chercher les restaurants\");\n\n    var url =\n      \"http://localhost:8080/api/restaurants?page=\" +\n      this.state.indexPage +\n      \"&pagesize=\" +\n      this.state.pageSize +\n      \"&name=\" +\n      this.state.search;\n\n    fetch(url)\n      .then(res => res.json())\n      .then(\n        result => {\n          this.setState({\n            // isLoaded: true,\n            nbRestaurants: result.count,\n            restaurants: result.data\n          });\n        },\n        // Remarque : il est important de traiter les erreurs ici\n        // au lieu d'utiliser un bloc catch(), pour ne pas passer à la trappe\n        // des exceptions provenant de réels bugs du composant.\n        error => {\n          this.setState({\n            error\n          });\n        }\n      );\n  }\n  \n\n  render() {\n    return (\n      <div>\n        <SimpleTable\n          titre={\"Nbr Restaurants : \" + this.state.nbRestaurants}\n          data={this.state.restaurants}\n          rowsPerPage={this.state.pageSize}\n          parrentCallbackIndexPage={ip => this.callbackIndexPage(ip)}\n          parrentCallbackPageSize={ps => this.callbackPageSize(ps)}\n          nbRestaurant={this.state.nbRestaurants}\n        ></SimpleTable>\n      </div>\n    );\n  }\n}\nexport default Restaurant;\n"]},"metadata":{},"sourceType":"module"}