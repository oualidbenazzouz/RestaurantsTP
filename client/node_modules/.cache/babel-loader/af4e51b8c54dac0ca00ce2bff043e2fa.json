{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\mbds\\\\Desktop\\\\Restaurants-Oualid\\\\client\\\\src\\\\components\\\\restaurants.js\";\nimport React from \"react\";\nimport SimpleTable from \"./table/simple_table\";\n\nclass Restaurant extends React.Component {\n  constructor(props) {\n    super(props); // modele, equivalent du data de VueJS\n\n    this.callbackPageSize = pageSizeChild => {\n      this.state.pageSize = pageSizeChild; // this.setState({ pageSize: pageSizeChild });\n\n      console.log(\"Venant du menu \" + this.state.pageSize);\n      this.getRestaurants();\n    };\n\n    this.callbackIndexPage = indexPagechild => {\n      this.state.indexPage = indexPagechild; // this.setState({ indexPage: indexPagechild });\n\n      console.log(this.state.indexPage);\n      this.getRestaurants();\n    };\n\n    this.callbackAddrestaurant = newRestaurant => {\n      console.log(\"je vais ajouter un restaurant\");\n      var formDataA = new FormData();\n      let url = \"http://localhost:8080/api/restaurants\";\n      formDataA.append(\"nom\", newRestaurant.name);\n      formDataA.append(\"cuisine\", newRestaurant.cuisine);\n      formDataA.append(\"place\", newRestaurant.borough);\n      fetch(url, {\n        method: \"POST\",\n        body: formDataA\n      }).then(responseJSON => {\n        return responseJSON.json();\n      }).then(responseJS => {\n        var apiMessage = responseJS.msg;\n        console.log(apiMessage);\n      }).catch(err => {\n        console.log(err);\n      });\n    };\n\n    this.callbackDelrestaurant = delRestaurant => {\n      console.log(\"je vais supprimer un restaurant\");\n      let url = \"http://localhost:8080/api/restaurants/\" + delRestaurant._id;\n      fetch(url, {\n        method: \"DELETE\"\n      }).then(responseJSON => {\n        return responseJSON.json();\n      }).then(responseJS => {\n        this.getRestaurants();\n      }).catch(err => {\n        console.log(err);\n      });\n    };\n\n    this.callbackModrestaurant = (oldRestaurant, newRestaurant) => {\n      console.log(\"je vais modifier un restaurant\");\n      var formData = new FormData();\n      let url = \"http://localhost:8080/api/restaurants/\" + oldRestaurant._id;\n      formData.append(\"nom\", newRestaurant.name);\n      formData.append(\"cuisine\", newRestaurant.cuisine);\n      formData.append(\"place\", newRestaurant.borough);\n      fetch(url, {\n        method: \"PUT\",\n        body: formData\n      }).then(responseJSON => {\n        return responseJSON.json();\n      }).then(responseJS => {\n        this.getRestaurants();\n      }).catch(err => {\n        console.log(err);\n      });\n    };\n\n    this.callbackSearch = searchChild => {\n      this.state.search = searchChild; // this.setState({ search: searchChild });\n\n      this.getRestaurants();\n    };\n\n    this.state = {\n      restaurants: [],\n      nouveauRestaurant: \"\",\n      search: \"\",\n      nbRestaurants: 0,\n      pageSize: 10,\n      indexPage: 0\n    }; // this.getRestaurants();\n  }\n\n  componentDidMount() {\n    this.getRestaurants();\n  }\n\n  getRestaurants() {\n    console.log(\"je vais chercher les restaurants\");\n    var url = \"http://localhost:8080/api/restaurants?page=\" + this.state.indexPage + \"&pagesize=\" + this.state.pageSize + \"&name=\" + this.state.search;\n    fetch(url).then(res => res.json()).then(result => {\n      this.setState({\n        // isLoaded: true,\n        nbRestaurants: result.count,\n        restaurants: result.data\n      });\n    }, // Remarque : il est important de traiter les erreurs ici\n    // au lieu d'utiliser un bloc catch(), pour ne pas passer à la trappe\n    // des exceptions provenant de réels bugs du composant.\n    error => {\n      this.setState({\n        error\n      });\n    });\n  }\n\n  modifierRestaurant() {\n    console.log(\"je vais modifier un restaurant\");\n    this.activeModifDialog = false;\n    var formData = new FormData();\n    let url = \"http://localhost:8081/api/restaurants/\" + this.restaurantModif.id;\n    formData.append(\"nom\", this.restaurantModif.nom);\n    formData.append(\"cuisine\", this.restaurantModif.cuisine);\n    fetch(url, {\n      method: \"PUT\",\n      body: formData\n    }).then(responseJSON => {\n      return responseJSON.json();\n    }).then(responseJS => {\n      console.log(responseJS.msg);\n      this.apiMessage = responseJS.msg;\n      this.showSnackbar = true;\n      this.state.getRestaurants();\n    }).catch(err => {\n      console.log(err);\n    });\n  }\n\n  render() {\n    return React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 179\n      },\n      __self: this\n    }, React.createElement(SimpleTable, {\n      titre: \"Nbr Restaurants : \" + this.state.nbRestaurants,\n      data: this.state.restaurants,\n      rowsPerPage: this.state.pageSize,\n      parrentCallbackIndexPage: ip => this.callbackIndexPage(ip),\n      parrentCallbackPageSize: ps => this.callbackPageSize(ps),\n      parrentCallbackSearch: s => this.callbackSearch(s),\n      parrentCallbackAdd: a => this.callbackAddrestaurant(a),\n      parrentCallbackDel: d => this.callbackDelrestaurant(d),\n      parrentCallbackMod: (oldR, newR) => this.callbackModrestaurant(oldR, newR),\n      nbRestaurant: this.state.nbRestaurants,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 180\n      },\n      __self: this\n    }));\n  }\n\n}\n\nexport default Restaurant;","map":{"version":3,"sources":["C:\\Users\\mbds\\Desktop\\Restaurants-Oualid\\client\\src\\components\\restaurants.js"],"names":["React","SimpleTable","Restaurant","Component","constructor","props","callbackPageSize","pageSizeChild","state","pageSize","console","log","getRestaurants","callbackIndexPage","indexPagechild","indexPage","callbackAddrestaurant","newRestaurant","formDataA","FormData","url","append","name","cuisine","borough","fetch","method","body","then","responseJSON","json","responseJS","apiMessage","msg","catch","err","callbackDelrestaurant","delRestaurant","_id","callbackModrestaurant","oldRestaurant","formData","callbackSearch","searchChild","search","restaurants","nouveauRestaurant","nbRestaurants","componentDidMount","res","result","setState","count","data","error","modifierRestaurant","activeModifDialog","restaurantModif","id","nom","showSnackbar","render","ip","ps","s","a","d","oldR","newR"],"mappings":"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","sourcesContent":["import React from \"react\";\nimport SimpleTable from \"./table/simple_table\";\n\nclass Restaurant extends React.Component {\n  constructor(props) {\n    super(props);\n    // modele, equivalent du data de VueJS\n    this.state = {\n      restaurants: [],\n      nouveauRestaurant: \"\",\n      search: \"\",\n      nbRestaurants: 0,\n      pageSize: 10,\n      indexPage: 0\n    };\n    // this.getRestaurants();\n  }\n\n  componentDidMount() {\n    this.getRestaurants();\n  }\n\n  callbackPageSize = pageSizeChild => {\n    this.state.pageSize = pageSizeChild;\n    // this.setState({ pageSize: pageSizeChild });\n    console.log(\"Venant du menu \" + this.state.pageSize);\n    this.getRestaurants();\n  };\n\n  callbackIndexPage = indexPagechild => {\n    this.state.indexPage = indexPagechild;\n    // this.setState({ indexPage: indexPagechild });\n    console.log(this.state.indexPage);\n    this.getRestaurants();\n  };\n\n  callbackAddrestaurant = newRestaurant => {\n    console.log(\"je vais ajouter un restaurant\");\n\n    var formDataA = new FormData();\n\n    let url = \"http://localhost:8080/api/restaurants\";\n\n    formDataA.append(\"nom\", newRestaurant.name);\n    formDataA.append(\"cuisine\", newRestaurant.cuisine);\n    formDataA.append(\"place\", newRestaurant.borough);\n\n    fetch(url, {\n      method: \"POST\",\n      body: formDataA\n    })\n      .then(responseJSON => {\n        return responseJSON.json();\n      })\n      .then(responseJS => {\n        var apiMessage = responseJS.msg;\n        console.log(apiMessage);\n      })\n      .catch(err => {\n        console.log(err);\n      });\n  };\n\n  callbackDelrestaurant = delRestaurant => {\n    console.log(\"je vais supprimer un restaurant\");\n\n    let url = \"http://localhost:8080/api/restaurants/\" + delRestaurant._id;\n\n    fetch(url, {\n      method: \"DELETE\"\n    })\n      .then(responseJSON => {\n        return responseJSON.json();\n      })\n      .then(responseJS => {\n        this.getRestaurants();\n      })\n      .catch(err => {\n        console.log(err);\n      });\n  };\n\n  callbackModrestaurant = (oldRestaurant, newRestaurant) => {\n    console.log(\"je vais modifier un restaurant\");\n\n    var formData = new FormData();\n\n    let url = \"http://localhost:8080/api/restaurants/\" + oldRestaurant._id;\n\n    formData.append(\"nom\", newRestaurant.name);\n    formData.append(\"cuisine\", newRestaurant.cuisine);\n    formData.append(\"place\", newRestaurant.borough);\n\n    fetch(url, {\n      method: \"PUT\",\n      body: formData\n    })\n      .then(responseJSON => {\n        return responseJSON.json();\n      })\n      .then(responseJS => {\n        this.getRestaurants();\n      })\n      .catch(err => {\n        console.log(err);\n      });\n  };\n\n  callbackSearch = searchChild => {\n    this.state.search = searchChild;\n    // this.setState({ search: searchChild });\n    this.getRestaurants();\n  };\n\n  getRestaurants() {\n    console.log(\"je vais chercher les restaurants\");\n\n    var url =\n      \"http://localhost:8080/api/restaurants?page=\" +\n      this.state.indexPage +\n      \"&pagesize=\" +\n      this.state.pageSize +\n      \"&name=\" +\n      this.state.search;\n\n    fetch(url)\n      .then(res => res.json())\n      .then(\n        result => {\n          this.setState({\n            // isLoaded: true,\n            nbRestaurants: result.count,\n            restaurants: result.data\n          });\n        },\n        // Remarque : il est important de traiter les erreurs ici\n        // au lieu d'utiliser un bloc catch(), pour ne pas passer à la trappe\n        // des exceptions provenant de réels bugs du composant.\n        error => {\n          this.setState({\n            error\n          });\n        }\n      );\n  }\n  modifierRestaurant() {\n    console.log(\"je vais modifier un restaurant\");\n\n    this.activeModifDialog = false;\n\n    var formData = new FormData();\n\n    let url =\n      \"http://localhost:8081/api/restaurants/\" + this.restaurantModif.id;\n\n    formData.append(\"nom\", this.restaurantModif.nom);\n    formData.append(\"cuisine\", this.restaurantModif.cuisine);\n\n    fetch(url, {\n      method: \"PUT\",\n      body: formData\n    })\n      .then(responseJSON => {\n        return responseJSON.json();\n      })\n      .then(responseJS => {\n        console.log(responseJS.msg);\n        this.apiMessage = responseJS.msg;\n        this.showSnackbar = true;\n        this.state.getRestaurants();\n      })\n      .catch(err => {\n        console.log(err);\n      });\n  }\n\n  render() {\n    return (\n      <div>\n        <SimpleTable\n          titre={\"Nbr Restaurants : \" + this.state.nbRestaurants}\n          data={this.state.restaurants}\n          rowsPerPage={this.state.pageSize}\n          parrentCallbackIndexPage={ip => this.callbackIndexPage(ip)}\n          parrentCallbackPageSize={ps => this.callbackPageSize(ps)}\n          parrentCallbackSearch={s => this.callbackSearch(s)}\n          parrentCallbackAdd={a => this.callbackAddrestaurant(a)}\n          parrentCallbackDel={d => this.callbackDelrestaurant(d)}\n          parrentCallbackMod={(oldR, newR) =>\n            this.callbackModrestaurant(oldR, newR)\n          }\n          nbRestaurant={this.state.nbRestaurants}\n        ></SimpleTable>\n      </div>\n    );\n  }\n}\nexport default Restaurant;\n"]},"metadata":{},"sourceType":"module"}